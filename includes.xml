	<property name="is${os.name}" value="true"/>
	<property name="Company" value="esp"/>

	<target name="setup" description="Basic target that all must eventually use" depends="Linux,Windows">
		<echo message="Setting up basic properties"/>
		<tstamp/>
		<property name="basedir" value="${homedir}/java/${ant.project.name}"/>
		<property name="sourcedir" value="${basedir}/src"/>
		<property name="outputdir" value="${basedir}/bin"/>
		<property name="docsdir" value="${basedir}/doc/"/>
		<property name="classpath" value="${java.home}/../lib/tools.jar:${outputdir}"/>
	</target>
		
	<target name="Linux" if="isLinux" description="Sets up linux specific stuff">
		<echo message="Setting up for Linux"/>
		<property name="homedir" value="${user.home}"/>
	</target>

	<target name="Windows" unless="isLinux" description="Sets up windows specific stuff">
		<echo message="Setting up for Windows"/>
		<property name="homedir" value="${user.home}/My Documents"/>
	</target>

	<target name="basefix" depends="setup" description="Fixes crlfs in source files">
		<fixcrlf srcdir="${base}" includes="${RootPackage}/**/*"/>
	</target>

	<target name="dependencycheck" description="Performs a dependency check">
		<depend srcdir="${sourcedir}" destdir="${outputdir}" cache="dependencies"/>
	</target>

	<target name="basebuild" depends="setup" description="Performs the basic build">
		<mkdir dir="${outputdir}"/>
		<javac srcdir="${sourcedir}" includes="**/*.java" destdir="${outputdir}" classpath="${classpath}" source="1.4"/>
		<delete quiet="true" file="${outputdir}/build.properties"/>
		<echo file="${outputdir}/build.properties" append="yes">build.date=${DSTAMP}${line.separator}</echo>
		<echo file="${outputdir}/build.properties" append="yes">build.time=${TSTAMP}${line.separator}</echo>
	</target>

	<target name="basepackage" depends="basebuild" description="Packages up the code">
		<jar jarfile="${basedir}/${ant.project.name}.jar" basedir="${outputdir}" includes="**/*" manifest="${sourcedir}/manifest"/>
	</target>

	<target name="basedocs" depends="setup" description="Extracts the documentation">
		<delete dir="${docsdir}"/>
		<mkdir dir="${docsdir}"/>
		<javadoc sourcepath="${sourcedir}" destdir="${docsdir}" classpath="${classpath}" private="true" use="true" author="true" version="true" windowtitle="${ant.project.name}" packagenames="com.${Company}.*"/>
	</target>

	<target name="cvsupdate" depends="setup">
		<cvs quiet="true" command="update" cvsroot=":pserver:dave@eeguinness.swan.ac.uk:/usr/local/cvsroot" package="${ant.project.name}" dest="${basedir}"/>
	</target>

	<target name="cvscommit" depends="cvsupdate">
		<cvs quiet="true" command="commit" cvsroot=":pserver:dave@eeguinness.swan.ac.uk:/usr/local/cvsroot" package="${ant.project.name}" dest="${basedir}"/>
	</target>

